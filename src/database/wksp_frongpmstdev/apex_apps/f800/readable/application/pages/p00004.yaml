---
# ====== Page: WIP Adjustments ===============================
id: 4
identification: 
  name: WIP Adjustments
  alias: WIP-TAGGING
  title: Bill Adjustments

appearance: 
  page-mode: Modal Dialog
  dialog-template: Drawer
  template-options: 
  - '#DEFAULT#'
  - js-dialog-class-t-Drawer--pullOutEnd
  - js-dialog-class-t-Drawer--xl

dialog: 
  chained: true

navigation-menu: 
  override-user-interface-level: false

navigation: 
  cursor-focus: Do not focus cursor
  warn-on-unsaved-changes: true

javascript: 
  file-urls: 
  - '#APP_IMAGES#currencyFormatter.js'
  - '#APP_FILES#PreBillingAdjustments#MIN#.js	'
  function-and-global-variable-declaration: |
    var htmldb_delete_message='"DELETE_CONFIRM_MSG"';
    

css: 
  inline: |
    .separator {
      display: flex;
      align-items: center;
      text-align: center;
      margin: 10px;
    }
    
    .separator::before,
    .separator::after {
      content: '';
      flex: 1;
      border-bottom: 1px solid #000;
    }
    
    .separator:not(:empty)::before {
      margin-right: .45em;
    }
    
    .separator:not(:empty)::after {
      margin-left: .45em;
    }

security: 
  authentication: Page Requires Authentication
  deep-linking: Application Default
  page-access-protection: Unrestricted
  form-auto-complete: Off
  browser-cache: Application Default

session-management: 
  rejoin-sessions: Application Default

advanced: 
  enable-duplicate-page-submissions: Yes - Enable page to be re-posted
  reload-on-submit: Only for Success

server-cache: 
  caching: Disabled

regions: 
- # ====== Region: Hours Adjustment ============================
  id: 44845788585701925
  identification: 
    name: Hours Adjustment
    type: Static Content

  source: 
    html-code: <div class="separator"><b>OR</b></div>

  layout: 
    sequence: 90
    parent-region: Bill Adjustments # 312994257469800970
    slot: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Blank with Attributes
    template-options: 
    - '#DEFAULT#'
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  server-side-condition: 
    type: Expression
    language: PL/SQL
    pl/sql-expression: ':WIP_LINE_COUNT = 1 and :P4_HOURS_COUNT > 0'

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Bill Adjustments ============================
  id: 312994257469800970
  identification: 
    name: Bill Adjustments
    type: Static Content

  layout: 
    sequence: 10
    parent-region: No Parent
    slot: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--removeHeader js-removeLandmark
    - t-Region--accent2
    - t-Region--noUI
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: true
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Transfer and Split ==========================
  id: 322035237153208875
  identification: 
    name: Transfer and Split
    type: Interactive Grid

  source: 
    location: Local Database
    type: Table / View
    table-owner: Parsing Schema
    table-name: XXGPMS_PROJECT_SPLIT
    include-rowid-column: true

  layout: 
    sequence: 81
    parent-region: Bill Adjustments # 312994257469800970
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    static-id: ProjectSplit
    region-display-selector: false
    exclude-title-from-translation: false

  server-side-condition: 
    type: Never

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    id: 322035901565208881
    edit: 
      enabled: true
      allowed-operations: 
      - Add Row
      - Update Row
      - Delete Row
      lost-update-type: Row Values
      add-row-if-empty: false

    performance: 
      lazy-loading: true

    appearance: 
      select-first-row: false
      fixed-row-height: true

    pagination: 
      type: Scroll
      show-total-count: true

    toolbar: 
      show: true
      controls: 
      - Search Field

    enable-users-to: 
      save-public-report: false
      flashback: false
      define-chart-view: false
      download: false

    heading: 
      fixed-to: Page

    icon-view: 
      show: false

    detail-view: 
      show: false

    saved-reports: 
    - # ====== Saved Report: Primary Report ========================
      id: 323049152065638589
      identification: 
        name: Primary Report
        alias: 127193

  columns: 
  - # ====== Column: ROWID =======================================
    id: 315133612824064458
    identification: 
      column-name: ROWID
      type: Hidden

    settings: 
      value-protected: true

    layout: 
      sequence: 70

    accessibility: 
      value-identifies-row: false

    source: 
      type: Database Column
      database-column: ROWID
      data-type: ROWID
      primary-key: true

    session-state: 
      data-type: VARCHAR2

    export-/-printing: 
      include-in-export-/-print: false

  - # ====== Column: SESSION_ID ==================================
    id: 322035946893208882
    identification: 
      column-name: SESSION_ID
      type: Hidden

    settings: 
      value-protected: true

    layout: 
      sequence: 30

    accessibility: 
      value-identifies-row: false

    source: 
      type: Database Column
      database-column: SESSION_ID
      data-type: NUMBER
      query-only: false
      primary-key: false

    default: 
      type: SQL Query (return single value)
      sql-query-(return-single-value): select V('SESSION') from dual
      duplicate-copies-existing-value: true

    session-state: 
      data-type: VARCHAR2

    export-/-printing: 
      include-in-export-/-print: false

    enable-users-to: 
      sort: true
      control-break/aggregate: true

  - # ====== Column: PROJECT_NUMBER ==============================
    id: 322036049058208883
    identification: 
      column-name: PROJECT_NUMBER
      type: Text Field

    heading: 
      heading: '&P0_PROJECT_LABEL. Number'
      alignment: start

    settings: 
      trim-spaces: Leading and Trailing
      text-case: NO CHANGE

    layout: 
      sequence: 40
      column-alignment: start
      stretch: Use Report Setting

    accessibility: 
      value-identifies-row: false

    validation: 
      value-required: false
      maximum-length: 25

    source: 
      type: Database Column
      database-column: PROJECT_NUMBER
      data-type: VARCHAR2
      query-only: false
      primary-key: false

    default: 
      duplicate-copies-existing-value: true

    column-filter: 
      enabled: true
      performance-impacting-operators: 
      - Contains
      - Starts With
      - Case Insensitive
      - Regular Expression
      text-case: Mixed
      lov-type: Distinct Column
      exact-match: true

    export-/-printing: 
      include-in-export-/-print: true

    enable-users-to: 
      sort: true
      control-break/aggregate: true
      hide: true

  - # ====== Column: TASK_NUMBER =================================
    id: 322036226939208884
    identification: 
      column-name: TASK_NUMBER
      type: Text Field

    heading: 
      heading: Task Number
      alignment: start

    settings: 
      trim-spaces: Leading and Trailing
      text-case: NO CHANGE

    layout: 
      sequence: 50
      column-alignment: start
      stretch: Use Report Setting

    accessibility: 
      value-identifies-row: false

    validation: 
      value-required: false
      maximum-length: 25

    source: 
      type: Database Column
      database-column: TASK_NUMBER
      data-type: VARCHAR2
      query-only: false
      primary-key: false

    default: 
      duplicate-copies-existing-value: true

    column-filter: 
      enabled: true
      performance-impacting-operators: 
      - Contains
      - Starts With
      - Case Insensitive
      - Regular Expression
      text-case: Mixed
      lov-type: Distinct Column
      exact-match: true

    export-/-printing: 
      include-in-export-/-print: true

    enable-users-to: 
      sort: true
      control-break/aggregate: true
      hide: true

  - # ====== Column: QUANTITY ====================================
    id: 322036321191208885
    identification: 
      column-name: QUANTITY
      type: Number Field

    heading: 
      heading: Quantity
      alignment: end

    settings: 
      number-alignment: End
      virtual-keyboard: Text

    layout: 
      sequence: 60
      column-alignment: end
      stretch: Use Report Setting

    accessibility: 
      value-identifies-row: false

    validation: 
      value-required: false

    source: 
      type: Database Column
      database-column: QUANTITY
      data-type: NUMBER
      query-only: false
      primary-key: false

    default: 
      duplicate-copies-existing-value: true

    column-filter: 
      enabled: true
      lov-type: None

    export-/-printing: 
      include-in-export-/-print: true

    enable-users-to: 
      sort: true
      control-break/aggregate: true
      hide: true

  - # ====== Column: APEX$ROW_ACTION =============================
    id: 322036390611208886
    identification: 
      column-name: APEX$ROW_ACTION
      type: Actions Menu

    layout: 
      sequence: 20

  - # ====== Column: APEX$ROW_SELECTOR ===========================
    id: 322036510644208887
    identification: 
      column-name: APEX$ROW_SELECTOR
      type: Row Selector

    settings: 
      enable-multi-select: true
      show-select-all: true
      hide-control: false

    layout: 
      sequence: 10

page-items: 
- # ====== Page Item: P4_HOURS =================================
  id: 44845652271701923
  identification: 
    name: P4_HOURS
    type: Number Field

  label: 
    label: Hours
    alignment: Left

  settings: 
    number-alignment: Start
    virtual-keyboard: Decimal

  layout: 
    sequence: 100
    region: Bill Adjustments # 312994257469800970
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  server-side-condition: 
    type: Expression
    language: PL/SQL
    pl/sql-expression: ':WIP_LINE_COUNT = 1 and :P4_HOURS_COUNT > 0'

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P4_HOURS_NON_BILLABLE ====================
  id: 44845751605701924
  identification: 
    name: P4_HOURS_NON_BILLABLE
    type: Display Only

  label: 
    label: Non-Billable
    alignment: Left

  settings: 
    format: Plain Text
    based-on: Item Value
    show-line-breaks: true
    send-on-page-submit: false

  layout: 
    sequence: 120
    region: Bill Adjustments # 312994257469800970
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  server-side-condition: 
    type: Expression
    language: PL/SQL
    pl/sql-expression: ':WIP_LINE_COUNT = 1 and :P4_HOURS_COUNT > 0'

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P4_HOURS_COUNT ===========================
  id: 44846319404701930
  identification: 
    name: P4_HOURS_COUNT
    type: Hidden

  settings: 
    value-protected: false

  layout: 
    sequence: 20
    region: No Parent
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: false
    restricted-characters: All characters can be saved.

- # ====== Page Item: P4_SUCCESS_MESSAGE =======================
  id: 52953225072658101
  identification: 
    name: P4_SUCCESS_MESSAGE
    type: Hidden

  settings: 
    value-protected: false

  layout: 
    sequence: 30
    region: No Parent
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: false
    restricted-characters: All characters can be saved.

- # ====== Page Item: P4_CANCEL ================================
  id: 52953687996658106
  identification: 
    name: P4_CANCEL
    type: Checkbox

  label: 
    label: Cancel
    alignment: Left

  settings: 
    use-defaults: false
    checked-value: Y
    unchecked-value: N

  layout: 
    sequence: 190
    region: Bill Adjustments # 312994257469800970
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: 3
    new-column: true
    column-span: 2
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    - t-Form-fieldContainer--xlarge
    - margin-top-lg

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P4_EXPENDITURE_TYPE ======================
  id: 52954426471658113
  identification: 
    name: P4_EXPENDITURE_TYPE
    type: Popup LOV

  label: 
    label: Expenditure Type
    alignment: Left

  settings: 
    display-as: Inline Popup
    initial-fetch: Automatic
    manual-entry: false
    search-as-you-type: true
    minimum-characters: No minimum (0)

  multiple-values: 
    type: No

  layout: 
    sequence: 200
    region: Bill Adjustments # 312994257469800970
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  list-of-values: 
    type: SQL Query
    sql-query: |
      SELECT EXPENDITURE_TYPE_NAME d, EXPENDITURE_TYPE_NAME r
      FROM XXGPMS_EXP_TYPES
      WHERE SESSION_ID = V('APP_SESSION')
      AND   UPPER(EXPENDITURE_TYPE_NAME) NOT IN (SELECT UPPER(EXPENDITURE_TYPE_NAME)
      FROM XXGPMS_PROJECT_COSTS 
      WHERE SESSION_ID = V('APP_SESSION')
      AND   EXPENDITURE_ITEM_ID = TRIM(BOTH '-' FROM :WIP_EXPIDS)
      )
      ORDER BY 1
    display-extra-values: false
    display-null-value: true
    null-display-value: '-- SELECT --'

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  server-side-condition: 
    type: Expression
    language: PL/SQL
    pl/sql-expression: ':WIP_LINE_COUNT = 1 and :P4_HOURS_COUNT > 0'

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: EVENT_ADJ_PCT ============================
  id: 312994407477800971
  identification: 
    name: EVENT_ADJ_PCT
    type: Number Field

  label: 
    label: Discount
    alignment: Left

  settings: 
    number-alignment: Start
    virtual-keyboard: Text

  layout: 
    sequence: 50
    region: Bill Adjustments # 312994257469800970
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: false
    restricted-characters: All characters can be saved.

- # ====== Page Item: WIP_SEL_AMOUNT ===========================
  id: 312994612017800973
  identification: 
    name: WIP_SEL_AMOUNT
    type: Number Field

  label: 
    label: WIP Amount
    alignment: Left

  settings: 
    number-alignment: End
    virtual-keyboard: Text

  layout: 
    sequence: 10
    region: Bill Adjustments # 312994257469800970
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: 5
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    format-mask: 999G999G999G999G990D0000
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  read-only: 
    type: Always

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: false
    restricted-characters: All characters can be saved.

- # ====== Page Item: WIP_EXPIDS ===============================
  id: 312994872365800976
  identification: 
    name: WIP_EXPIDS
    type: Hidden

  settings: 
    value-protected: true

  layout: 
    sequence: 140
    region: Bill Adjustments # 312994257469800970
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: false
    restricted-characters: All characters can be saved.

- # ====== Page Item: WIP_PROJECT_NUMBER =======================
  id: 312995145888800979
  identification: 
    name: WIP_PROJECT_NUMBER
    type: Hidden

  settings: 
    value-protected: true

  layout: 
    sequence: 150
    region: Bill Adjustments # 312994257469800970
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: false
    restricted-characters: All characters can be saved.

- # ====== Page Item: WIP_MODAL_FLAG ===========================
  id: 312996664265800994
  identification: 
    name: WIP_MODAL_FLAG
    type: Hidden

  settings: 
    value-protected: true

  layout: 
    sequence: 160
    region: Bill Adjustments # 312994257469800970
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: false
    restricted-characters: All characters can be saved.

- # ====== Page Item: EVENT_ADJ_AMT ============================
  id: 312997180818800999
  identification: 
    name: EVENT_ADJ_AMT
    type: Number Field

  label: 
    label: Amount to Bill
    alignment: Left

  settings: 
    number-alignment: End
    virtual-keyboard: Text

  layout: 
    sequence: 80
    region: Bill Adjustments # 312994257469800970
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 50

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: false
    restricted-characters: All characters can be saved.

- # ====== Page Item: WIP_ERROR_FLAG ===========================
  id: 315133412047064456
  identification: 
    name: WIP_ERROR_FLAG
    type: Hidden

  settings: 
    value-protected: true

  layout: 
    sequence: 240
    region: Bill Adjustments # 312994257469800970
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: false
    restricted-characters: All characters can be saved.

- # ====== Page Item: WIP_TRX_SPLT =============================
  id: 315834554739062554
  identification: 
    name: WIP_TRX_SPLT
    type: Display Only

  label: 
    alignment: Left

  settings: 
    format: Plain Text
    based-on: Item Value
    show-line-breaks: true
    send-on-page-submit: true

  layout: 
    sequence: 230
    region: Bill Adjustments # 312994257469800970
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: 0

  appearance: 
    template: Optional
    template-options: 
    - '#DEFAULT#'

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  default: 
    type: Static
    static-value: Transfer & Split

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  server-side-condition: 
    type: Never

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: false
    restricted-characters: All characters can be saved.

- # ====== Page Item: WIP_BILLABLE_FLAG ========================
  id: 322033995115208862
  identification: 
    name: WIP_BILLABLE_FLAG
    type: Switch

  label: 
    label: Billable
    alignment: Left

  settings: 
    use-defaults: false
    on-value: Y
    on-label: Yes
    off-value: N
    off-label: No

  layout: 
    sequence: 180
    region: Bill Adjustments # 312994257469800970
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  default: 
    type: Static
    static-value: Y

  session-state: 
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: false
    restricted-characters: All characters can be saved.

- # ====== Page Item: WIP_HOLD =================================
  id: 322034047109208863
  identification: 
    name: WIP_HOLD
    type: Select List

  label: 
    label: Hold
    alignment: Left

  settings: 
    page-action-on-selection: None

  multiple-values: 
    type: No

  layout: 
    sequence: 170
    region: Bill Adjustments # 312994257469800970
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    height: 1

  validation: 
    value-required: false

  list-of-values: 
    type: Static Values
    static-values: 'STATIC2:Once;O,Until Released;Y,Release Hold;N,Bill Only;BO'
    display-extra-values: false
    display-null-value: true
    null-display-value: '-- SELECT --'

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: false
    restricted-characters: All characters can be saved.

- # ====== Page Item: WIP_JUSTIFICATION_CODE ===================
  id: 322034198456208864
  identification: 
    name: WIP_JUSTIFICATION_CODE
    type: Select List

  label: 
    label: Justification
    alignment: Left

  settings: 
    page-action-on-selection: None

  multiple-values: 
    type: No

  layout: 
    sequence: 210
    region: Bill Adjustments # 312994257469800970
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Required - Floating
    template-options: 
    - '#DEFAULT#'
    height: 1

  validation: 
    value-required: false

  list-of-values: 
    type: Static Values
    static-values: 'STATIC2:Client Satisfaction;Client Satisfaction,Billing Error;Billing Error,B.I.S.S.;B.I.S.S.,We do not pay for summer associates;We do not pay for summer associates'
    display-extra-values: false
    display-null-value: true
    null-display-value: '-- SELECT --'

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: false
    restricted-characters: All characters can be saved.

- # ====== Page Item: WIP_JUSTIFICATION_TEXT ===================
  id: 322034305035208865
  identification: 
    name: WIP_JUSTIFICATION_TEXT
    type: Textarea

  label: 
    alignment: Left

  settings: 
    resizable: true
    auto-height: false
    character-counter: true
    trim-spaces: Leading and Trailing

  layout: 
    sequence: 220
    region: Bill Adjustments # 312994257469800970
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Required - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30
    height: 5

  validation: 
    value-required: false
    maximum-length: 150

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: false
    restricted-characters: All characters can be saved.

- # ====== Page Item: WIP_LINE_COUNT ===========================
  id: 322034604828208868
  identification: 
    name: WIP_LINE_COUNT
    type: Number Field

  label: 
    label: Total Lines
    alignment: Left

  settings: 
    number-alignment: End
    virtual-keyboard: Text

  layout: 
    sequence: 30
    region: Bill Adjustments # 312994257469800970
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: 3
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  read-only: 
    type: Always

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: false
    restricted-characters: All characters can be saved.

- # ====== Page Item: WIP_HOURS_COUNT ==========================
  id: 322034673585208869
  identification: 
    name: WIP_HOURS_COUNT
    type: Text Field

  label: 
    label: Total Quantity
    alignment: Left

  settings: 
    subtype: Text
    trim-spaces: Leading and Trailing
    text-case: NO CHANGE
    submit-when-enter-pressed: false
    disabled: false

  layout: 
    sequence: 40
    region: Bill Adjustments # 312994257469800970
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: 4
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    format-mask: 999G999G999G999G990D0000
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  read-only: 
    type: Always

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: false
    restricted-characters: All characters can be saved.

- # ====== Page Item: P4_CURRENCY ==============================
  id: 347130929385721659
  identification: 
    name: P4_CURRENCY
    type: Hidden

  settings: 
    value-protected: false

  layout: 
    sequence: 250
    region: Bill Adjustments # 312994257469800970
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: false
    restricted-characters: All characters can be saved.

- # ====== Page Item: WIP_SEL_AMOUNT_COPY ======================
  id: 347131160646721661
  identification: 
    name: WIP_SEL_AMOUNT_COPY
    type: Hidden

  settings: 
    value-protected: false

  layout: 
    sequence: 20
    region: Bill Adjustments # 312994257469800970
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: false
    restricted-characters: All characters can be saved.

buttons: 
- # ====== Button: WIP_Adjust ==================================
  id: 312995254296800980
  identification: 
    button-name: WIP_Adjust
    label: Create Adjustments

  layout: 
    sequence: 50
    region: Bill Adjustments # 312994257469800970
    slot: DELETE
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Text
    hot: true
    template-options: 
    - '#DEFAULT#'

  behavior: 
    action: Defined by Dynamic Action
    execute-validations: true

dynamic-actions: 
- # ====== Dynamic Action: When Entered Hours calculate Non Bill
  id: 44845957141701926
  identification: 
    name: When Entered Hours calculate Non Billable Hours

  execution: 
    sequence: 30
    event-scope: Static
    type: Immediate

  when: 
    event: Change
    selection-type: Item(s)
    item(s): 
    - P4_HOURS

  client-side-condition: 
    type: Item is not null
    item: P4_HOURS

  actions: 
  - # ====== Action: Set Value ===================================
    id: 44846063044701927
    identification: 
      action: Set Value

    settings: 
      set-type: PL/SQL Expression
      pl/sql-expression: ':WIP_HOURS_COUNT - :P4_HOURS'
      items-to-submit: 
      - WIP_HOURS_COUNT
      - P4_HOURS
      escape-special-characters: true
      suppress-change-event: false

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P4_HOURS_NON_BILLABLE

    execution: 
      sequence: 30
      event: When Entered Hours calculate Non Billable Hours # 44845957141701926
      fire-when-event-result-is: True
      fire-on-initialization: false
      stop-execution-on-error: true
      wait-for-result: true

  - # ====== Action: Validations =================================
    id: 44846623590701933
    identification: 
      name: Validations
      action: Execute JavaScript Code

    settings: 
      code: |
        var total_hours = Number(apex.item('WIP_HOURS_COUNT').getValue());
        var entered_hours = Number(apex.item('P4_HOURS').getValue());
        var amount = apex.item('EVENT_ADJ_AMT').getValue();
        var discount = apex.item('EVENT_ADJ_PCT').getValue();
        apex.message.clearErrors();
        if (entered_hours > total_hours){
             apex.message.clearErrors();
             apex.message.showErrors([
            {
                type:       "error",
                location:   [ "page", "inline" ],
                pageItem:   "P4_HOURS",
                message:    "Entered Hours cannot be greater than the total hours!",
                unsafe:     false
            }
        ]);
        apex.da.cancel();
        }
        else if (((amount && amount > 0 || discount && discount > 0) && (entered_hours && entered_hours > 0))){
            apex.message.clearErrors();
             apex.message.showErrors([
            {
                type:       "error",
                location:   [ "page"],
                pageItem:   "P4_HOURS",
                message:    "Enter either Amount or Hours!",
                unsafe:     false
            }
            ]);
            // apex.item('P4_HOURS').setValue(""); 
            // apex.item('EVENT_ADJ_AMT').setValue(""); 
            // apex.item('EVENT_ADJ_PCT').setValue(""); 
            apex.da.cancel();
        }

    execution: 
      sequence: 20
      event: When Entered Hours calculate Non Billable Hours # 44845957141701926
      fire-when-event-result-is: True
      fire-on-initialization: false

  - # ====== Action: Disable =====================================
    id: 52953324012658102
    identification: 
      action: Disable

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - WIP_HOLD
      - WIP_BILLABLE_FLAG
      - EVENT_ADJ_AMT
      - EVENT_ADJ_PCT

    execution: 
      sequence: 10
      event: When Entered Hours calculate Non Billable Hours # 44845957141701926
      fire-when-event-result-is: True
      fire-on-initialization: false

  - # ====== Action: Enable ======================================
    id: 52953395506658103
    identification: 
      action: Enable

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - WIP_HOLD
      - WIP_BILLABLE_FLAG
      - EVENT_ADJ_AMT
      - EVENT_ADJ_PCT

    execution: 
      sequence: 10
      event: When Entered Hours calculate Non Billable Hours # 44845957141701926
      fire-when-event-result-is: False
      fire-on-initialization: false

- # ====== Dynamic Action: When Clicked on Cancel ==============
  id: 52953779628658107
  identification: 
    name: When Clicked on Cancel

  execution: 
    sequence: 40
    event-scope: Static
    type: Immediate

  when: 
    event: Change
    selection-type: Item(s)
    item(s): 
    - P4_CANCEL

  client-side-condition: 
    type: Item = Value
    item: P4_CANCEL
    value: Y

  actions: 
  - # ====== Action: Disable =====================================
    id: 52953936486658108
    identification: 
      action: Disable

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P4_HOURS
      - EVENT_ADJ_AMT
      - EVENT_ADJ_PCT
      - WIP_BILLABLE_FLAG
      - WIP_HOLD

    execution: 
      sequence: 10
      event: When Clicked on Cancel # 52953779628658107
      fire-when-event-result-is: True
      fire-on-initialization: true

  - # ====== Action: Enable ======================================
    id: 52954049879658109
    identification: 
      action: Enable

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P4_HOURS
      - EVENT_ADJ_AMT
      - EVENT_ADJ_PCT
      - WIP_BILLABLE_FLAG
      - WIP_HOLD

    execution: 
      sequence: 10
      event: When Clicked on Cancel # 52953779628658107
      fire-when-event-result-is: False
      fire-on-initialization: true

- # ====== Dynamic Action: When Selected =======================
  id: 52954506867658114
  identification: 
    name: When Selected

  execution: 
    sequence: 50
    event-scope: Static
    type: Immediate

  when: 
    event: Change
    selection-type: Item(s)
    item(s): 
    - P4_EXPENDITURE_TYPE

  client-side-condition: 
    type: Item is not null
    item: P4_EXPENDITURE_TYPE

  actions: 
  - # ====== Action: Disable =====================================
    id: 52954568176658115
    identification: 
      action: Disable

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - WIP_HOLD
      - WIP_BILLABLE_FLAG
      - EVENT_ADJ_AMT
      - EVENT_ADJ_PCT
      - P4_HOURS
      - P4_CANCEL

    execution: 
      sequence: 10
      event: When Selected # 52954506867658114
      fire-when-event-result-is: True
      fire-on-initialization: false

  - # ====== Action: Enable ======================================
    id: 52954676908658116
    identification: 
      action: Enable

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - WIP_HOLD
      - WIP_BILLABLE_FLAG
      - EVENT_ADJ_AMT
      - EVENT_ADJ_PCT
      - P4_HOURS
      - P4_CANCEL

    execution: 
      sequence: 10
      event: When Selected # 52954506867658114
      fire-when-event-result-is: False
      fire-on-initialization: false

- # ====== Dynamic Action: WIP_AdjustClick =====================
  id: 312995625017800983
  identification: 
    name: WIP_AdjustClick

  execution: 
    sequence: 10
    event-scope: Static
    type: Immediate

  when: 
    event: Click
    selection-type: Button
    button: WIP_Adjust # 312995254296800980

  actions: 
  - # ====== Action: Progress Bar Start ==========================
    id: 30663573587267128
    identification: 
      name: Progress Bar Start
      action: Execute JavaScript Code

    settings: 
      code: |
        apex.message.clearErrors();
        setTimer();
        

    execution: 
      sequence: 20
      event: WIP_AdjustClick # 312995625017800983
      fire-when-event-result-is: True
      fire-on-initialization: false

  - # ====== Action: Code to call the Package ====================
    id: 312995644890800984
    identification: 
      name: Code to call the Package
      action: Execute Server-side Code

    settings: 
      language: PE.PROPERTY.SOURCE_SNIPPET_LANG.LOV.PLSQL.D
      pl/sql-code: |
        declare
          V_status number := 0;
          V_RESPONSE CLOB;
        begin
        xx_gpms.WIP_DEBUG (2, 50000, 'Cancel Flag '||:P4_CANCEL, '');
        xx_gpms.WIP_DEBUG (2, 50001, 'Exp Type '||:P4_EXPENDITURE_TYPE, '');
        xx_gpms.WIP_DEBUG (2, 50002,  'Hours '||:P4_HOURS, '');
        if (:WIP_ERROR_FLAG = 'N') then
          IF :P4_CANCEL = 'Y' and :P4_EXPENDITURE_TYPE is null
          THEN
            XX_GPMS.PERFORM_ADJUST_PROJECT_COSTS(P_EXPENDITURE_ITEM_ID => :WIP_EXPIDS,
                              P_ADJUSTMENT_TYPE_CODE => 'REVERSE',
                              P_JUSTIFICATION => :WIP_JUSTIFICATION_CODE||CASE  WHEN :WIP_JUSTIFICATION_TEXT IS NOT NULL THEN ': '||:WIP_JUSTIFICATION_TEXT END,
                              P_RESPONSE => V_RESPONSE,
                              P_RESPONSE_CODE => V_STATUS);
            IF V_STATUS IN (200,201)
            THEN
              :P4_SUCCESS_MESSAGE := V_RESPONSE;
             ELSE
                apex_error.add_error (
                  p_message          => v_response,
                  p_display_location => apex_error.c_inline_in_notification );
            END IF;  
          ELSIF :P4_EXPENDITURE_TYPE IS NOT NULL AND NVL(:P4_CANCEL,'N') = 'N'
          THEN
            XX_GPMS.PERFORM_ADJUST_PROJECT_COSTS(P_EXPENDITURE_ITEM_ID => :WIP_EXPIDS,
                              P_ADJUSTMENT_TYPE_CODE => 'TRANSFER',
                              P_EXPENDITURE_TYPE => :P4_EXPENDITURE_TYPE,
                              P_JUSTIFICATION => :WIP_JUSTIFICATION_CODE||CASE  WHEN :WIP_JUSTIFICATION_TEXT IS NOT NULL THEN ': '||:WIP_JUSTIFICATION_TEXT END,
                              P_RESPONSE => V_RESPONSE,
                              P_RESPONSE_CODE => V_STATUS);
            IF V_STATUS IN (200,201)
            THEN
              :P4_SUCCESS_MESSAGE := V_RESPONSE;
             ELSE
                apex_error.add_error (
                  p_message          => v_response,
                  p_display_location => apex_error.c_inline_in_notification );
            END IF;                     
          ELSIF :P4_EXPENDITURE_TYPE IS NULL AND NVL(:P4_CANCEL,'N') = 'N'
          THEN
            IF :P4_HOURS IS NULL
            THEN 
              V_status := XX_GPMS.WIP_TAG_ADJUSTMENT (:WIP_EXPIDS
              ,:WIP_PROJECT_NUMBER,:EVENT_ADJ_PCT, :EVENT_ADJ_AMT
              , :WIP_SEL_AMOUNT_COPY
              ,:WIP_BILLABLE_FLAG
              ,:WIP_JUSTIFICATION_CODE||CASE  WHEN :WIP_JUSTIFICATION_TEXT IS NOT NULL THEN ': '||:WIP_JUSTIFICATION_TEXT END);
              if v_status = 0 
              then
                :P4_SUCCESS_MESSAGE := 'Success';
              end if;  
            ELSE
              XX_GPMS.WIP_ADJUST_HOURS(:WIP_EXPIDS,:P4_HOURS,
              :WIP_JUSTIFICATION_CODE||CASE  WHEN :WIP_JUSTIFICATION_TEXT IS NOT NULL THEN ': '||:WIP_JUSTIFICATION_TEXT END,V_STATUS,V_RESPONSE);
              if V_STATUS IN (200,201)
              then
                :P4_SUCCESS_MESSAGE := V_RESPONSE;
              ELSE
                apex_error.add_error (
                  p_message          => v_response,
                  p_display_location => apex_error.c_inline_in_notification );
              end if;  
            END IF;    
          END IF;  
        end if;
        end;
        
      items-to-submit: 
      - WIP_EXPIDS
      - EVENT_ADJ_PCT
      - WIP_PROJECT_NUMBER
      - EVENT_ADJ_AMT
      - WIP_SEL_AMOUNT
      - WIP_ERROR_FLAG
      - WIP_BILLABLE_FLAG
      - WIP_JUSTIFICATION_CODE
      - WIP_JUSTIFICATION_TEXT
      - P4_HOURS
      - P4_CANCEL
      - P4_EXPENDITURE_TYPE
      items-to-return: 
      - P4_SUCCESS_MESSAGE
      suppress-change-event: false

    execution: 
      sequence: 30
      event: WIP_AdjustClick # 312995625017800983
      fire-when-event-result-is: True
      fire-on-initialization: false
      stop-execution-on-error: true
      wait-for-result: true

  - # ====== Action: Close Dialog and Progress Bar End ===========
    id: 312995887438800986
    identification: 
      name: Close Dialog and Progress Bar End
      action: Execute JavaScript Code

    settings: 
      code: |
        var i,
        i = "Y";
        apex.item( "WIP_MODAL_FLAG" ).setValue (i);
        if ($v("WIP_ERROR_FLAG") == 'N') {
        apex.navigation.dialog.close(true);
        apex.page.submit('NEW');
        }
        
        endTimer();
        
        

    execution: 
      sequence: 40
      event: WIP_AdjustClick # 312995625017800983
      fire-when-event-result-is: True
      fire-on-initialization: false

    client-side-condition: 
      type: Item is not null
      item: P4_SUCCESS_MESSAGE

  - # ====== Action: Validations =================================
    id: 315133527953064457
    identification: 
      name: Validations
      action: Execute JavaScript Code

    settings: 
      code: |
        // var ig_len, ig_project_number, ig_project_exists, ig_project_len, ig_qty;
        
        // var ig$ = apex.region("ProjectSplit").widget();
        
        // var model = ig$.interactiveGrid("getViews", "grid").model;
        
        // var ig_errflag = 'N';
        
        
        
        // ig_project_number = 0;
        // ig_project_len = 0;
        // ig_project_exists = 0;
        // ig_qty = 0;
        
        // model.forEach(function(igrec) {
        //    ig_project_number = igrec[model.getFieldKey("PROJECT_NUMBER")];
        //    ig_qty += Number(igrec[model.getFieldKey("QUANTITY")]);
              
        //    ig_project_len = ig_project_number.length;
           
        //    if (ig_project_len > 0) {
        //        ig_project_exists = 1;
            
        //    }
          
        //    //apex.message.alert(igrec[model.getFieldKey("PROJECT_NUMBER")]);
        // });
        
        
        
        
        
        if ($v("EVENT_ADJ_AMT") != 0  && $v("EVENT_ADJ_PCT") != 0 ){
               ig_errflag = 'Y';
               apex.message.alert( "Adjustment Amount and Adjustment Percentage cannot be specified at the same time" );
               apex.da.cancel(); 
        }
        
        
        // if ($v("EVENT_ADJ_AMT") != 0  && ig_project_exists == 1 ){
        //        ig_errflag = 'Y';
        //        apex.message.alert( "Adjustment Amount and Transfers cannot be specified at the same time" );
        //        apex.da.cancel(); 
        // }
        
        // if ($v("EVENT_ADJ_PCT") != 0  && ig_project_exists == 1 ){
        //        ig_errflag = 'Y';
        //        apex.message.alert( "Adjustment Percentage and Transfers cannot be specified at the same time" );
        //        apex.da.cancel(); 
        // }
        
        // if (ig_project_exists == 1 & $v("WIP_HOURS_COUNT") != ig_qty) {
        //        ig_errflag = 'Y';
        //        apex.message.alert( "Mismatch between Expenditure Quantity and Transfer Quantity" );
        //        apex.da.cancel(); 
        // }
        
        apex.item( "WIP_ERROR_FLAG" ).setValue ('N');
        
        // if (ig_errflag == 'N') {
        // apex.region( "ProjectSplit" ).widget().interactiveGrid("getActions"). invoke("save");
        // }
        
        // Justification Validations by EK
        
        var amt_pct = apex.item('EVENT_ADJ_PCT').getValue();
        var amt = apex.item('EVENT_ADJ_AMT').getValue();
        var hours = apex.item('P4_HOURS').getValue();
        var justification_code = apex.item('WIP_JUSTIFICATION_CODE').getValue();
        var justification_txt = apex.item('WIP_JUSTIFICATION_TEXT').getValue();
        var cancel = apex.item('P4_CANCEL').getValue();
        var exp_type = apex.item('P4_EXPENDITURE_TYPE').getValue();
        
        if (amt_pct >0 || amt > 0||hours > 0||cancel=='Y'||exp_type){
            if (!justification_code){
                if(!justification_txt){
                    apex.message.clearErrors();
                    // apex.message.alert( 'Justification is needed if Write Up/Down is performed!');
                    apex.message.showErrors([
                    {
                       type:       "error",
                       location:   [ "page", "inline" ],
                       pageItem:   "WIP_JUSTIFICATION_CODE",
                       message:    "Justification is needed if Write Up/Down is performed or line attributes are changed!",
                       unsafe:     false
                    }]) 
                     apex.da.cancel(); 
                }
            }
        }
        
        

    execution: 
      sequence: 10
      event: WIP_AdjustClick # 312995625017800983
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Format the Numbers as per the currenc
  id: 347130751483721657
  identification: 
    name: Format the Numbers as per the currency

  execution: 
    sequence: 20
    event-scope: Static

  when: 
    event: Page Load

  actions: 
  - # ====== Action: Execute JavaScript Code =====================
    id: 347130885555721658
    identification: 
      action: Execute JavaScript Code

    settings: 
      code: $("#WIP_SEL_AMOUNT").val(currencyFormatter(Number($("#WIP_SEL_AMOUNT").val()),apex.item("P4_CURRENCY").getValue()));

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - WIP_SEL_AMOUNT
      - WIP_SEL_AMOUNT_COPY

    execution: 
      sequence: 20
      event: Format the Numbers as per the currency # 347130751483721657
      fire-when-event-result-is: True
      fire-on-initialization: false

  - # ====== Action: Execute Server-side Code ====================
    id: 347131451654721664
    identification: 
      action: Execute Server-side Code

    settings: 
      language: PE.PROPERTY.SOURCE_SNIPPET_LANG.LOV.PLSQL.D
      pl/sql-code: ':WIP_SEL_AMOUNT_COPY := :WIP_SEL_AMOUNT;'
      items-to-submit: 
      - WIP_SEL_AMOUNT_COPY
      - WIP_SEL_AMOUNT

    execution: 
      sequence: 10
      event: Format the Numbers as per the currency # 347130751483721657
      fire-when-event-result-is: True
      fire-on-initialization: false
      stop-execution-on-error: true
      wait-for-result: true

validations: 
- # ====== Validation: Justification is needed for Write Up/Down
  id: 46470823788573653
  identification: 
    name: Justification is needed for Write Up/Down

  execution: 
    sequence: 10

  validation: 
    type: Function Body (returning Error Text)
    language: PL/SQL
    pl/sql-function-body-returning-error-text: |
      if (to_number(:EVENT_ADJ_PCT, '999G999G999G999G990D000')  <>0 
        or to_number(:EVENT_ADJ_AMT, '999G999G999G999G990D000') <> 0
        or to_number(:P4_HOURS, '999G999G999G999G990D000') <> 0
        or :P4_CANCEL = 'Y' 
        or :P4_EXPENDITURE_TYPE is not null)
      then
        if coalesce(:WIP_JUSTIFICATION_CODE,:WIP_JUSTIFICATION_TEXT,'~!~') = '~!~'
        then
          return 'Justification is needed if Write Up/Down is performed!';
        end if;
      end if;
    always-execute: true

  error: 
    display-location: Inline with Field and in Notification
    associated-item: WIP_JUSTIFICATION_CODE # 322034198456208864

  server-side-condition: 
    when-button-pressed: WIP_Adjust # 312995254296800980

processes: 
- # ====== Process: New ========================================
  id: 30102637581964634
  identification: 
    name: New
    type: Execute Code
    execution-chain: None

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: |
      IF :WIP_LINE_COUNT = 1 
      THEN
        BEGIN
        SELECT BILLABLE_FLAG
        INTO  :WIP_BILLABLE_FLAG
        FROM  XXGPMS_PROJECT_COSTS 
        WHERE SESSION_ID = V('APP_SESSION')
        AND   EXPENDITURE_ITEM_ID = REPLACE(:WIP_EXPIDS,'-','');
        EXCEPTION
          WHEN OTHERS THEN
            NULL;
        END;   
      END IF;

  execution: 
    sequence: 10
    point: Before Header
    run-process: Once Per Page Visit (default)

  server-side-condition: 
    type: Never

- # ====== Process: Percentage_for_the_progress ================
  id: 32871982899639924
  identification: 
    name: Percentage_for_the_progress
    type: Execute Code
    execution-chain: None

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: |
      begin
      select percentage,message
      into   :P0_PROGRESS_BAR2, :P0_PROGRESS_MESSAGE
      from   progress_bar_entries
      where  module = 'WIP_ADJUSTMENT'
      and    seq = :P0_PROGRESS_SEQ
      order  by seq;
      exception
       when others then
         :P0_PROGRESS_BAR2 := 99;
         :P0_PROGRESS_MESSAGE := 'Processing..';
      end;
      
      apex_json.open_object;
      apex_json.write('percent', :P0_PROGRESS_BAR2);
      apex_json.write('message', :P0_PROGRESS_MESSAGE);
      apex_json.close_object;

  execution: 
    sequence: 20
    point: Ajax Callback
    run-process: Once Per Page Visit (default)

  comments: 
    comments: |
      -- SELECT PERCENTAGE, MESSAGE
      -- INTO  :P2_PROGRESS_BAR2,:P2_PROGRESS_MESSAGE
      -- FROM (
      -- SELECT * 
      -- FROM  PROGRESS_ENTRIES
      -- ORDER BY CREATED_DATE DESC)
      -- WHERE ROWNUM = 1;
      

- # ====== Process: Project Split - Save Interactive Grid Data =
  id: 322036537894208888
  identification: 
    name: Project Split - Save Interactive Grid Data
    type: Interactive Grid - Automatic Row Processing (DML)
    execution-chain: None
    editable-region: Transfer and Split # 322035237153208875

  settings: 
    target-type: Region Source
    prevent-lost-updates: true
    lock-row: Yes
    return-primary-key(s)-after-insert: true

  execution: 
    sequence: 10
    point: Processing
    run-process: Once Per Page Visit (default)

  error: 
    display-location: Inline in Notification

  server-side-condition: 
    execution-scope: For Created and Modified Rows
    type: Never

