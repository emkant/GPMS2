---
# ====== Page: Transfer and Split ============================
id: 14
identification: 
  name: Transfer and Split
  alias: TRANSFER-AND-SPLIT
  title: Transfer and Split

appearance: 
  page-mode: Modal Dialog
  dialog-template: Drawer
  template-options: 
  - '#DEFAULT#'
  - js-dialog-class-t-Drawer--pullOutEnd

dialog: 
  chained: true

navigation-menu: 
  override-user-interface-level: false

navigation: 
  cursor-focus: Do not focus cursor
  warn-on-unsaved-changes: false

security: 
  authentication: Page Requires Authentication
  deep-linking: Application Default
  page-access-protection: Arguments Must Have Checksum
  form-auto-complete: Off
  browser-cache: Application Default

session-management: 
  rejoin-sessions: Application Default

advanced: 
  enable-duplicate-page-submissions: Yes - Enable page to be re-posted
  reload-on-submit: Only for Success

server-cache: 
  caching: Disabled

regions: 
- # ====== Region: Transfer and Split ==========================
  id: 338857835180076575
  identification: 
    name: Transfer and Split
    type: Interactive Grid

  source: 
    location: Local Database
    type: Table / View
    table-owner: Parsing Schema
    table-name: XXGPMS_PROJECT_SPLIT
    include-rowid-column: true
    where-clause: SESSION_ID = V('APP_SESSION')
    page-items-to-submit: 
    - P14_ACTION_SELECTION
    - P14_ACTUAL_PROJECT_NUMBER
    - P14_ACTUAL_TASK_NUMBER
    - P14_WIP_HOURS_COUNT
    - P14_WIP_PROJECT_NUMBER

  layout: 
    sequence: 10
    parent-region: No Parent
    slot: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--removeHeader js-removeLandmark
    - t-Region--noUI
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    static-id: ProjectSplit
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    id: 338858499592076581
    edit: 
      enabled: true
      allowed-operations: 
      - Add Row
      - Update Row
      - Delete Row
      lost-update-type: Row Values
      add-row-if-empty: true

    performance: 
      lazy-loading: true

    appearance: 
      select-first-row: false
      fixed-row-height: true

    pagination: 
      type: Scroll
      show-total-count: true

    toolbar: 
      show: true
      controls: 
      - Search Field

    enable-users-to: 
      save-public-report: false
      flashback: false
      define-chart-view: false
      download: false

    heading: 
      fixed-to: Page

    icon-view: 
      show: false

    detail-view: 
      show: false

    saved-reports: 
    - # ====== Saved Report: Primary Report ========================
      id: 339871750092506289
      identification: 
        name: Primary Report
        alias: 127193

  columns: 
  - # ====== Column: CREATION_DATE ===============================
    id: 23744831481731733
    identification: 
      column-name: CREATION_DATE
      type: Hidden

    settings: 
      value-protected: true

    layout: 
      sequence: 90

    accessibility: 
      value-identifies-row: false

    source: 
      type: Database Column
      database-column: CREATION_DATE
      data-type: DATE
      query-only: false
      primary-key: false

    default: 
      duplicate-copies-existing-value: true

    session-state: 
      data-type: VARCHAR2

    export-/-printing: 
      include-in-export-/-print: false

    enable-users-to: 
      sort: false

  - # ====== Column: CREATED_BY ==================================
    id: 23744885543731734
    identification: 
      column-name: CREATED_BY
      type: Hidden

    settings: 
      value-protected: true

    layout: 
      sequence: 100

    accessibility: 
      value-identifies-row: false

    source: 
      type: Database Column
      database-column: CREATED_BY
      data-type: VARCHAR2
      query-only: false
      primary-key: false

    default: 
      duplicate-copies-existing-value: true

    session-state: 
      data-type: VARCHAR2

    export-/-printing: 
      include-in-export-/-print: false

    enable-users-to: 
      sort: false

  - # ====== Column: LAST_UPDATE_DATE ============================
    id: 23744997722731735
    identification: 
      column-name: LAST_UPDATE_DATE
      type: Hidden

    settings: 
      value-protected: true

    layout: 
      sequence: 110

    accessibility: 
      value-identifies-row: false

    source: 
      type: Database Column
      database-column: LAST_UPDATE_DATE
      data-type: DATE
      query-only: false
      primary-key: false

    default: 
      duplicate-copies-existing-value: true

    session-state: 
      data-type: VARCHAR2

    export-/-printing: 
      include-in-export-/-print: false

    enable-users-to: 
      sort: false

  - # ====== Column: LAST_UPDATED_BY =============================
    id: 23745102791731736
    identification: 
      column-name: LAST_UPDATED_BY
      type: Hidden

    settings: 
      value-protected: true

    layout: 
      sequence: 120

    accessibility: 
      value-identifies-row: false

    source: 
      type: Database Column
      database-column: LAST_UPDATED_BY
      data-type: VARCHAR2
      query-only: false
      primary-key: false

    default: 
      duplicate-copies-existing-value: true

    session-state: 
      data-type: VARCHAR2

    export-/-printing: 
      include-in-export-/-print: false

    enable-users-to: 
      sort: false

  - # ====== Column: ACTION ======================================
    id: 23745184679731737
    identification: 
      column-name: ACTION
      type: Text Field

    heading: 
      heading: Action
      alignment: start

    settings: 
      trim-spaces: Leading and Trailing
      text-case: NO CHANGE

    layout: 
      sequence: 130
      column-alignment: start
      stretch: Use Report Setting

    accessibility: 
      value-identifies-row: false

    validation: 
      value-required: false

    source: 
      type: Database Column
      database-column: ACTION
      data-type: VARCHAR2
      query-only: false
      primary-key: false

    default: 
      type: Item
      item: P14_ACTION_SELECTION
      duplicate-copies-existing-value: true

    column-filter: 
      enabled: true
      performance-impacting-operators: 
      - Contains
      - Starts With
      - Case Insensitive
      - Regular Expression
      text-case: Mixed
      lov-type: Distinct Column
      exact-match: true

    export-/-printing: 
      include-in-export-/-print: false

    enable-users-to: 
      sort: false
      hide: true

    server-side-condition: 
      type: Never

  - # ====== Column: TASK_NUMBER =================================
    id: 30102508869964633
    identification: 
      column-name: TASK_NUMBER
      type: Text Field

    heading: 
      heading: Task Number
      alignment: start

    settings: 
      trim-spaces: Leading and Trailing
      text-case: NO CHANGE

    layout: 
      sequence: 50
      column-alignment: start
      stretch: Use Report Setting

    accessibility: 
      value-identifies-row: false

    validation: 
      value-required: true
      maximum-length: 25

    source: 
      type: Database Column
      database-column: TASK_NUMBER
      data-type: VARCHAR2
      query-only: false
      primary-key: false

    default: 
      type: Function Body
      language: PL/SQL
      pl/sql-function-body: |
        if :P14_ACTION_SELECTION = 'S' and :P14_WIP_LINE_COUNT = 1 
        then
          return :P14_ACTUAL_TASK_NUMBER;
        end if;  
      duplicate-copies-existing-value: true

    column-filter: 
      enabled: true
      performance-impacting-operators: 
      - Contains
      - Starts With
      - Case Insensitive
      - Regular Expression
      text-case: Mixed
      lov-type: Distinct Column
      exact-match: true

    export-/-printing: 
      include-in-export-/-print: true

    enable-users-to: 
      sort: true
      control-break/aggregate: true
      hide: true

    read-only: 
      type: Expression
      language: PL/SQL
      pl/sql-expression: ":P14_ACTION_SELECTION = 'S'"
      execute: Once

  - # ====== Column: PERCENTAGE ==================================
    id: 43050944329250843
    identification: 
      column-name: PERCENTAGE
      type: Number Field

    heading: 
      heading: Percentage
      alignment: end

    settings: 
      maximum-value: 100
      number-alignment: Start
      virtual-keyboard: Decimal

    layout: 
      sequence: 70
      column-alignment: end
      stretch: Use Report Setting

    accessibility: 
      value-identifies-row: false

    validation: 
      value-required: false

    source: 
      type: Database Column
      database-column: PERCENTAGE
      data-type: NUMBER
      query-only: false
      primary-key: false

    default: 
      duplicate-copies-existing-value: true

    column-filter: 
      enabled: true
      lov-type: None

    export-/-printing: 
      include-in-export-/-print: true

    enable-users-to: 
      sort: true
      control-break/aggregate: true
      hide: true

    read-only: 
      type: Expression
      language: PL/SQL
      pl/sql-expression: |
        (:P14_ACTION_SELECTION = 'S' and :P14_PROJECTS_COUNT > 1)
        or 
        (:P14_ACTION_SELECTION = 'T')
      execute: Once

  - # ====== Column: ROWID =======================================
    id: 331956210850932158
    identification: 
      column-name: ROWID
      type: Hidden

    settings: 
      value-protected: true

    layout: 
      sequence: 80

    accessibility: 
      value-identifies-row: false

    source: 
      type: Database Column
      database-column: ROWID
      data-type: ROWID
      primary-key: true

    session-state: 
      data-type: VARCHAR2

    export-/-printing: 
      include-in-export-/-print: false

  - # ====== Column: SESSION_ID ==================================
    id: 338858544920076582
    identification: 
      column-name: SESSION_ID
      type: Hidden

    settings: 
      value-protected: true

    layout: 
      sequence: 30

    accessibility: 
      value-identifies-row: false

    source: 
      type: Database Column
      database-column: SESSION_ID
      data-type: NUMBER
      query-only: false
      primary-key: false

    default: 
      type: SQL Query (return single value)
      sql-query-(return-single-value): select V('SESSION') from dual
      duplicate-copies-existing-value: true

    session-state: 
      data-type: VARCHAR2

    export-/-printing: 
      include-in-export-/-print: false

    enable-users-to: 
      sort: true
      control-break/aggregate: true

  - # ====== Column: PROJECT_NUMBER ==============================
    id: 338858647085076583
    identification: 
      column-name: PROJECT_NUMBER
      type: Text Field

    heading: 
      heading: '&P0_PROJECT_LABEL. Number'
      alignment: start

    settings: 
      trim-spaces: Leading and Trailing
      text-case: NO CHANGE

    layout: 
      sequence: 40
      column-alignment: start
      stretch: Use Report Setting

    accessibility: 
      value-identifies-row: false

    validation: 
      value-required: true

    source: 
      type: Database Column
      database-column: PROJECT_NUMBER
      data-type: VARCHAR2
      query-only: false
      primary-key: false

    default: 
      type: Function Body
      language: PL/SQL
      pl/sql-function-body: |
        if :P14_ACTION_SELECTION = 'S' and :P14_PROJECTS_COUNT = 1 
        then
          return :P14_ACTUAL_PROJECT_NUMBER;
        end if;  
      duplicate-copies-existing-value: true

    column-filter: 
      enabled: true
      performance-impacting-operators: 
      - Contains
      - Starts With
      - Case Insensitive
      - Regular Expression
      text-case: Mixed
      lov-type: Use List of Values
      exact-match: true

    export-/-printing: 
      include-in-export-/-print: true

    enable-users-to: 
      sort: true
      control-break/aggregate: true
      hide: true

    read-only: 
      type: Expression
      language: PL/SQL
      pl/sql-expression: ":P14_ACTION_SELECTION = 'S' "
      execute: Once

    comments: 
      comments: |
        SELECT
               DISTINCT PROJECT_NUMBER D, PROJECT_NUMBER R
              FROM
                XXGPMS_PROJECTS
              WHERE 1=1
              AND   (
                  (:P14_ACTION_SELECTION = 'S' AND PROJECT_NUMBER = :P14_ACTUAL_PROJECT_NUMBER)
                  or (:P14_ACTION_SELECTION in ('T','ST'))
            --   or (:P14_ACTION_SELECTION = 'T' and PROJECT_NUMBER <> :P14_ACTUAL_PROJECT_NUMBER and :P14_PROJECTS_COUNT =1 )
            --   or (:P14_ACTION_SELECTION = 'T' and :P14_PROJECTS_COUNT > 1 AND PROJECT_NUMBER NOT IN (
            --       SELECT REGEXP_SUBSTR(:P14_WIP_PROJECT_NUMBER,'[^-]+',1,LEVEL)
            --       FROM DUAL
            --       CONNECT BY LEVEL<=REGEXP_COUNT(:P14_WIP_PROJECT_NUMBER,'[^-]+',1))
            --   )
            --   or (:P14_ACTION_SELECTION = 'ST' AND PROJECT_NUMBER NOT IN (
            --       SELECT REGEXP_SUBSTR(:P14_WIP_PROJECT_NUMBER,'[^-]+',1,LEVEL)
            --       FROM DUAL
            --       CONNECT BY LEVEL<=REGEXP_COUNT(:P14_WIP_PROJECT_NUMBER,'[^-]+',1))
            --   )
                )
                ORDER BY 1

  - # ====== Column: QUANTITY ====================================
    id: 338858919218076585
    identification: 
      column-name: QUANTITY
      type: Number Field

    heading: 
      heading: Quantity
      alignment: end

    settings: 
      number-alignment: End
      virtual-keyboard: Text

    layout: 
      sequence: 60
      column-alignment: end
      stretch: Use Report Setting

    accessibility: 
      value-identifies-row: false

    validation: 
      value-required: false

    source: 
      type: Database Column
      database-column: QUANTITY
      data-type: NUMBER
      query-only: false
      primary-key: false

    default: 
      type: Function Body
      language: PL/SQL
      pl/sql-function-body: |
        if :P14_ACTION_SELECTION = 'T'
        then
          return :P14_WIP_HOURS_COUNT;
        end if;  
      duplicate-copies-existing-value: true

    column-filter: 
      enabled: true
      lov-type: None

    export-/-printing: 
      include-in-export-/-print: true

    enable-users-to: 
      sort: true
      control-break/aggregate: true
      hide: true

    read-only: 
      type: Expression
      language: PL/SQL
      pl/sql-expression: |
        (:P14_ACTION_SELECTION = 'S' and (:P14_WIP_LINE_COUNT > 1 or :P14_PROJECTS_COUNT > 1))
        or
        (:P14_ACTION_SELECTION = 'S' and :P14_WIP_EXPIDS_COUNT > 1) 
        or 
        (:P14_ACTION_SELECTION = 'T')
        or 
        (:P14_ACTION_SELECTION = 'ST' and :P14_WIP_EXPIDS_COUNT > 1 )
      execute: Once

  - # ====== Column: APEX$ROW_ACTION =============================
    id: 338858988638076586
    identification: 
      column-name: APEX$ROW_ACTION
      type: Actions Menu

    layout: 
      sequence: 20

  - # ====== Column: APEX$ROW_SELECTOR ===========================
    id: 338859108671076587
    identification: 
      column-name: APEX$ROW_SELECTOR
      type: Row Selector

    settings: 
      enable-multi-select: true
      show-select-all: true
      hide-control: false

    layout: 
      sequence: 10

page-items: 
- # ====== Page Item: P14_WIP_SEL_AMOUNT =======================
  id: 23743225369731717
  identification: 
    name: P14_WIP_SEL_AMOUNT
    type: Display Only

  label: 
    label: WIP Amount
    alignment: Left

  settings: 
    format: Plain Text
    based-on: Item Value
    show-line-breaks: true
    send-on-page-submit: true

  layout: 
    sequence: 20
    region: Transfer and Split # 338857835180076575
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P14_WIP_EXPIDS ===========================
  id: 23743362325731718
  identification: 
    name: P14_WIP_EXPIDS
    type: Hidden

  settings: 
    value-protected: false

  layout: 
    sequence: 30
    region: Transfer and Split # 338857835180076575
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P14_WIP_LINE_COUNT =======================
  id: 23743378954731719
  identification: 
    name: P14_WIP_LINE_COUNT
    type: Display Only

  label: 
    label: Total Lines
    alignment: Left

  settings: 
    format: Plain Text
    based-on: Item Value
    show-line-breaks: true
    send-on-page-submit: true

  layout: 
    sequence: 40
    region: Transfer and Split # 338857835180076575
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P14_WIP_HOURS_COUNT ======================
  id: 23743526782731720
  identification: 
    name: P14_WIP_HOURS_COUNT
    type: Display Only

  label: 
    label: Total Hours
    alignment: Left

  settings: 
    format: Plain Text
    based-on: Item Value
    show-line-breaks: true
    send-on-page-submit: true

  layout: 
    sequence: 50
    region: Transfer and Split # 338857835180076575
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P14_WIP_PROJECT_NUMBER ===================
  id: 23743566348731721
  identification: 
    name: P14_WIP_PROJECT_NUMBER
    type: Hidden

  settings: 
    value-protected: false

  layout: 
    sequence: 100
    region: Transfer and Split # 338857835180076575
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P14_CURRENCY =============================
  id: 23743761903731722
  identification: 
    name: P14_CURRENCY
    type: Hidden

  settings: 
    value-protected: false

  layout: 
    sequence: 150
    region: Transfer and Split # 338857835180076575
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P14_ACTION ===============================
  id: 23744110848731726
  identification: 
    name: P14_ACTION
    type: Hidden

  settings: 
    value-protected: false

  layout: 
    sequence: 80
    region: Transfer and Split # 338857835180076575
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  default: 
    type: Function Body
    language: PL/SQL
    pl/sql-function-body: |
      if :P14_WIP_LINE_COUNT > 1 
      then
        return 'Transfer';
      end if;  

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P14_ACTUAL_PROJECT_NUMBER ================
  id: 23745879850731744
  identification: 
    name: P14_ACTUAL_PROJECT_NUMBER
    type: Hidden

  settings: 
    value-protected: false

  layout: 
    sequence: 140
    region: Transfer and Split # 338857835180076575
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P14_WIP_TASK_NUMBER ======================
  id: 23746146550731746
  identification: 
    name: P14_WIP_TASK_NUMBER
    type: Hidden

  settings: 
    value-protected: false

  layout: 
    sequence: 110
    region: Transfer and Split # 338857835180076575
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P14_ACTUAL_TASK_NUMBER ===================
  id: 23746189969731747
  identification: 
    name: P14_ACTUAL_TASK_NUMBER
    type: Hidden

  settings: 
    value-protected: false

  layout: 
    sequence: 130
    region: Transfer and Split # 338857835180076575
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P14_JOB_ALREADY_EXECUTED =================
  id: 30101903089964627
  identification: 
    name: P14_JOB_ALREADY_EXECUTED
    type: Hidden

  settings: 
    value-protected: false

  layout: 
    sequence: 50
    region: No Parent
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  default: 
    type: Static
    static-value: N

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P14_JUSTIFICATION ========================
  id: 31809096979923914
  identification: 
    name: P14_JUSTIFICATION
    type: Textarea

  label: 
    label: Justification
    alignment: Left

  settings: 
    resizable: true
    auto-height: false
    character-counter: true
    trim-spaces: Leading and Trailing

  layout: 
    sequence: 90
    region: Transfer and Split # 338857835180076575
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Required - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30
    height: 5

  validation: 
    value-required: true
    maximum-length: 150

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: false
    restricted-characters: All characters can be saved.

- # ====== Page Item: P14_ACTION_SELECTION =====================
  id: 43050825272250842
  identification: 
    name: P14_ACTION_SELECTION
    type: Radio Group

  label: 
    label: Action
    alignment: Left

  settings: 
    number-of-columns: 3
    page-action-on-selection: Redirect and Set Value

  layout: 
    sequence: 70
    region: Transfer and Split # 338857835180076575
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Required - Floating
    template-options: 
    - '#DEFAULT#'

  validation: 
    value-required: true

  list-of-values: 
    type: Static Values
    static-values: 'STATIC2:Split;S,Transfer;T,Split & Transfer;ST'
    display-extra-values: false
    display-null-value: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    escape-special-characters: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P14_PROJECTS_COUNT =======================
  id: 44843845727701905
  identification: 
    name: P14_PROJECTS_COUNT
    type: Display Only

  label: 
    label: Projects Selected
    alignment: Left

  settings: 
    format: Plain Text
    based-on: Item Value
    show-line-breaks: true
    send-on-page-submit: true

  layout: 
    sequence: 60
    region: Transfer and Split # 338857835180076575
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P14_SUCCESS_MESSAGE ======================
  id: 44844453595701911
  identification: 
    name: P14_SUCCESS_MESSAGE
    type: Hidden

  settings: 
    value-protected: false

  layout: 
    sequence: 160
    region: Transfer and Split # 338857835180076575
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P14_WIP_EXPIDS_COUNT =====================
  id: 44844520220701912
  identification: 
    name: P14_WIP_EXPIDS_COUNT
    type: Hidden

  settings: 
    value-protected: false

  layout: 
    sequence: 120
    region: Transfer and Split # 338857835180076575
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P14_ERROR_MESSAGE ========================
  id: 44844691573701914
  identification: 
    name: P14_ERROR_MESSAGE
    type: Hidden

  settings: 
    value-protected: false

  layout: 
    sequence: 170
    region: Transfer and Split # 338857835180076575
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P14_ALL_SELECTED_PROJECTS ================
  id: 44844841484701915
  identification: 
    name: P14_ALL_SELECTED_PROJECTS
    type: Hidden

  settings: 
    value-protected: false

  layout: 
    sequence: 180
    region: Transfer and Split # 338857835180076575
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

buttons: 
- # ====== Button: SAVE ========================================
  id: 23744200215731727
  identification: 
    button-name: SAVE
    label: Save

  layout: 
    sequence: 90
    region: Transfer and Split # 338857835180076575
    slot: CREATE
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Text
    hot: true
    template-options: 
    - '#DEFAULT#'

  behavior: 
    action: Defined by Dynamic Action
    execute-validations: true

dynamic-actions: 
- # ====== Dynamic Action: When Project is Selected ============
  id: 23745521017731740
  identification: 
    name: When Project is Selected

  execution: 
    sequence: 10
    event-scope: Static
    type: Immediate

  when: 
    event: Change
    selection-type: Column(s)
    interactive-grid: Transfer and Split # 338857835180076575
    column(s): 
    - PROJECT_NUMBER
    - TASK_NUMBER
    - QUANTITY

  client-side-condition: 
    type: Item / Column is not null
    component-type: Column
    column: PROJECT_NUMBER

  server-side-condition: 
    type: Never

  actions: 
  - # ====== Action: Execute Server-side Code ====================
    id: 23745609199731741
    identification: 
      action: Execute Server-side Code

    settings: 
      language: PE.PROPERTY.SOURCE_SNIPPET_LANG.LOV.PLSQL.D
      pl/sql-code: |
        xx_gpms.wip_debug(3,20000,'P14_WIP_LINE_COUNT '||:P14_WIP_LINE_COUNT,'');
        xx_gpms.wip_debug(3,20000,'P14_ACTUAL_PROJECT_NUMBER '||:P14_ACTUAL_PROJECT_NUMBER,'');
        xx_gpms.wip_debug(3,20000,'P14_ACTUAL_TASK_NUMBER '||:P14_ACTUAL_TASK_NUMBER,'');
        xx_gpms.wip_debug(3,20000,'P14_WIP_HOURS_COUNT '||:P14_WIP_HOURS_COUNT,'');
        xx_gpms.wip_debug(3,20000,'PROJECT_NUMBER '||:PROJECT_NUMBER,'');
        xx_gpms.wip_debug(3,20000,'TASK_NUMBER '||:TASK_NUMBER,'');
        xx_gpms.wip_debug(3,20000,'QUANTITY '||:QUANTITY,'');
        
        IF :P14_WIP_LINE_COUNT > 1 
        THEN 
          :ACTION := 'TRANSFER';
        ELSE
          IF trim(upper(:PROJECT_NUMBER)) <> trim(upper(:P14_ACTUAL_PROJECT_NUMBER))
          THEN    
            IF :P14_WIP_HOURS_COUNT = :QUANTITY
            THEN
              :ACTION := 'TRANSFER';
            ELSIF :P14_WIP_HOURS_COUNT <> :QUANTITY
            THEN
              :ACTION  := 'MULTI_SPLIT_TRANS';
            END IF;
          ELSE
            IF :P14_WIP_HOURS_COUNT <> :QUANTITY AND :P14_ACTUAL_TASK_NUMBER <> :TASK_NUMBER
            THEN
              :ACTION := 'MULTI_SPLIT_TRANS';
            ELSIF :P14_WIP_HOURS_COUNT <> :QUANTITY AND :P14_ACTUAL_TASK_NUMBER = :TASK_NUMBER  
            THEN
              :ACTION := 'SPLIT';
            ELSE
              :ACTION := 'TRANSFER';  
            END IF;
          END IF;  
        END IF;
        
      items-to-submit: 
      - PROJECT_NUMBER
      - P14_WIP_PROJECT_NUMBER
      - P14_ACTUAL_PROJECT_NUMBER
      - P14_WIP_TASK_NUMBER
      - P14_ACTUAL_TASK_NUMBER
      - TASK_NUMBER
      - QUANTITY
      items-to-return: 
      - ACTION
      suppress-change-event: false

    execution: 
      sequence: 10
      event: When Project is Selected # 23745521017731740
      fire-when-event-result-is: True
      fire-on-initialization: false
      stop-execution-on-error: true
      wait-for-result: true

- # ====== Dynamic Action: Loading Projects ====================
  id: 30101990378964628
  identification: 
    name: Loading Projects

  execution: 
    sequence: 50
    event-scope: Static

  when: 
    event: Page Load

  server-side-condition: 
    type: Expression
    language: PL/SQL
    pl/sql-expression: |
      nvl(:P14_JOB_ALREADY_EXECUTED,'N') = 'N'
      and 1=2

  actions: 
  - # ====== Action: Execute Server-side Code ====================
    id: 30102152263964629
    identification: 
      action: Execute Server-side Code

    settings: 
      language: PE.PROPERTY.SOURCE_SNIPPET_LANG.LOV.PLSQL.D
      pl/sql-code: |
        if NVL(:P14_JOB_ALREADY_EXECUTED,'N') = 'N'
        THEN
        begin
        APEX_AUTOMATION.EXECUTE (
            p_application_id  => :APP_ID,
            p_static_id       => 'get-all-projects' 
            );
          :P14_JOB_ALREADY_EXECUTED := 'Y';    
        end;    
        END IF;
      items-to-submit: 
      - P14_JOB_ALREADY_EXECUTED
      items-to-return: 
      - P14_JOB_ALREADY_EXECUTED
      suppress-change-event: false

    execution: 
      sequence: 30
      event: Loading Projects # 30101990378964628
      fire-when-event-result-is: True
      fire-on-initialization: false
      stop-execution-on-error: true
      wait-for-result: true

  - # ====== Action: Execute JavaScript Code =====================
    id: 30102217877964630
    identification: 
      action: Execute JavaScript Code

    settings: 
      code: setTimer();

    execution: 
      sequence: 10
      event: Loading Projects # 30101990378964628
      fire-when-event-result-is: True
      fire-on-initialization: false

  - # ====== Action: Execute JavaScript Code =====================
    id: 30102295828964631
    identification: 
      action: Execute JavaScript Code

    settings: 
      code: endTimer();

    execution: 
      sequence: 40
      event: Loading Projects # 30101990378964628
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Validate the Quantity & Percentage En
  id: 32830319558278999
  identification: 
    name: Validate the Quantity & Percentage Entered

  execution: 
    sequence: 20
    event-scope: Static
    type: Immediate

  when: 
    event: Click
    selection-type: Button
    button: SAVE # 23744200215731727

  actions: 
  - # ====== Action: Execute JavaScript Code =====================
    id: 32830446612279000
    identification: 
      action: Execute JavaScript Code

    settings: 
      code: |
        var quantity = 0;
        var percentage = 0;
        var grid_model = apex.region("ProjectSplit").widget().interactiveGrid("getViews","grid").model;
        grid_model.forEach(function(record,index,id){
            // if (!(grid_model.getValue(record,"QUANTITY"))||
            //    !(grid_model.getValue(record,"TASK_NUMBER"))||
            //    !(grid_model.getValue(record,"MATTER_NUMBER"))){
            //         apex.message.clearErrors();
            //         apex.message.showErrors([
            //      {
            //     type:       "error",
            //     location:   "page",
            //     message:    "Quantity or Task Number or Matter Number Cannot be empty to perform Split or Transfer",
            //     unsafe:     false
            //      }
            //     ]);
        
            // }
            // else{
            quantity = Number(quantity) + Number(grid_model.getValue(record,"QUANTITY") ? grid_model.getValue(record,"QUANTITY") :0);
            percentage = Number(percentage) + Number(grid_model.getValue(record,"PERCENTAGE") ? grid_model.getValue(record,"PERCENTAGE") :0)
        
            // }
        }
        )
        
        if (!(apex.item('P14_WIP_LINE_COUNT').getValue())){
            apex.message.clearErrors();
            apex.message.showErrors([
            {
                type:       "error",
                location:   "page",
                message:    "Please select a source line to perform Split or Transfer!",
                unsafe:     false
            }
        ]);
        }
        else{
           if (!(apex.item('P14_JUSTIFICATION').getValue()))
           {
            apex.message.clearErrors();
            apex.message.showErrors([
            {
                type:       "error",
                location:   ["page","inline"],
                pageItem:   "P14_JUSTIFICATION",
                message:    "Justification cannot be Empty!",
                unsafe:     false
            }
        ]);
        }
        else if (quantity == 0 && percentage == 0){
            apex.message.clearErrors();
            apex.message.showErrors([
            {
                type:       "error",
                location:   ["page"],
                message:    "Either Quantity or Percentage should be added!",
                unsafe:     false
            }]);
        }
        else if (quantity != 0 && percentage != 0){
            apex.message.clearErrors();
            apex.message.showErrors([
            {
                type:       "error",
                location:   ["page"],
                message:    "Enter only either Quantity or Percentage!",
                unsafe:     false
            }]);
        }
        else if (quantity > apex.item('P14_WIP_HOURS_COUNT').getValue()){
            apex.message.clearErrors();
            apex.message.showErrors([
            {
                type:       "error",
                location:   ["page"],
                message:    "Quantity cannot be greater than the total hours!",
                unsafe:     false
            }]);
        }
        else if (apex.item('P14_ACTION_SELECTION').getValue() == 'ST' && 
                    (quantity != apex.item('P14_WIP_HOURS_COUNT').getValue() && quantity)
                    )
        {
            apex.message.clearErrors();
            apex.message.showErrors([
            {
                type:       "error",
                location:   ["page"],
                message:    "Quantity should sum up to the total hours for Split and Transfer",
                unsafe:     false
            }]);
        }
        else if (apex.item('P14_ACTION_SELECTION').getValue() == 'ST' && 
                    (percentage != 100 && percentage)
                    )
        {
            apex.message.clearErrors();
            apex.message.showErrors([
            {
                type:       "error",
                location:   ["page"],
                message:    "Percentage total should be 100 for Split and Transfer",
                unsafe:     false
            }]);
        }
        else{
            apex.message.clearErrors();
            apex.page.submit('SAVE');
            console.warn = () => {};
        
            }
        }
        

    execution: 
      sequence: 10
      event: Validate the Quantity & Percentage Entered # 32830319558278999
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Validating Quantity Based on Action S
  id: 43050997102250844
  identification: 
    name: Validating Quantity Based on Action Selected

  execution: 
    sequence: 30
    event-scope: Static
    type: Immediate

  when: 
    event: Change
    selection-type: Column(s)
    interactive-grid: Transfer and Split # 338857835180076575
    column(s): 
    - QUANTITY

  actions: 
  - # ====== Action: Execute JavaScript Code =====================
    id: 43051142123250845
    identification: 
      action: Execute JavaScript Code

    settings: 
      code: |
        var action = apex.item('P14_ACTION_SELECTION').getValue();
        if (action == 'S'){
            console.log(apex.item('P14_WIP_HOURS_COUNT').getValue());
        }

    execution: 
      sequence: 10
      event: Validating Quantity Based on Action Selected # 43050997102250844
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: On Page Load hide IG buttons ========
  id: 44843951195701906
  identification: 
    name: On Page Load hide IG buttons

  execution: 
    sequence: 40
    event-scope: Static

  when: 
    event: Page Load

  actions: 
  - # ====== Action: Execute JavaScript Code =====================
    id: 44844028347701907
    identification: 
      action: Execute JavaScript Code

    settings: 
      code: |
        var actions = apex.region("ProjectSplit").call("getActions");
        var selected_action = apex.item('P14_ACTION_SELECTION').getValue();
            // alert(selected_action);
        if (selected_action == 'T' ||selected_action == 'S' ){
            // alert('Hiding');
           apex.region("ProjectSplit").call("getActions").hide("selection-add-row");
           apex.region("ProjectSplit").call("getActions").hide("row-add-row");
           apex.region("ProjectSplit").call("getActions").hide("row-duplicate");
           apex.region("ProjectSplit").call("getActions").hide("row-delete");
        }
        
        // $('[data-action="selection-add-row"]').hide();

    affected-elements: 
      selection-type: Region
      region: Transfer and Split # 338857835180076575

    execution: 
      sequence: 10
      event: On Page Load hide IG buttons # 44843951195701906
      fire-when-event-result-is: True
      fire-on-initialization: true

processes: 
- # ====== Process: Call REST ==================================
  id: 23744322567731728
  identification: 
    name: Call REST
    type: Execute Code
    execution-chain: None

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: |
      DECLARE
        V_RESPONSE VARCHAR2(4000);
        V_RESPONSE_CODE NUMBER;
      BEGIN
      --   for i in (select * from xxgpms_project_split 
      --             where session_id = v('APP_SESSION'))
      --   loop
        :P14_WIP_EXPIDS := TRIM(BOTH '-' FROM :P14_WIP_EXPIDS);
         XX_GPMS.PERFORM_SPLIT_TRANSFER(
         P_EXPENDITURE_ITEM_ID => :P14_WIP_EXPIDS,
         P_JUSTIFICATION => :P14_JUSTIFICATION,
         P_RESPONSE      => V_RESPONSE,
         P_RESPONSE_CODE => V_RESPONSE_CODE,
         P_SOURCE_PROJECT => :P14_WIP_PROJECT_NUMBER,
         P_ACTION => :P14_ACTION_SELECTION,
         P_TOTAL_HOURS => :P14_WIP_HOURS_COUNT
         );
         xx_gpms.wip_debug(3,19000,'After REST Call '||v_response||' '||V_RESPONSE_CODE,'');
        if v_response_code IN (200,201)
        then
          -- apex_error.add_error (
          -- p_message          => v_response,
          -- p_display_location => apex_error.c_inline_in_notification );
          -- exit;
      --   else
          -- apex_application.g_print_success_message:= v_response;  
             xx_gpms.wip_debug(3,19001,'After REST Call','');
          :P14_SUCCESS_MESSAGE := V_RESPONSE;
        ELSE
        xx_gpms.wip_debug(3,19002,'After REST Call','');
          if v_response is not null 
          then
            apex_error.add_error (
            p_message          => v_response,
            p_display_location => apex_error.c_inline_in_notification );
          end if;
        end if;  
      --   end loop; 
      END;   

  execution: 
    sequence: 50
    point: Processing
    run-process: Once Per Page Visit (default)

  success-message: 
    success-message: '&P14_SUCCESS_MESSAGE.'

  error: 
    display-location: Inline in Notification

  server-side-condition: 
    when-button-pressed: SAVE # 23744200215731727

- # ====== Process: Load the GRID data =========================
  id: 23744386687731729
  identification: 
    name: Load the GRID data
    type: Interactive Grid - Automatic Row Processing (DML)
    execution-chain: None
    editable-region: Transfer and Split # 338857835180076575

  settings: 
    target-type: Region Source
    prevent-lost-updates: true
    lock-row: Yes
    return-primary-key(s)-after-insert: true

  execution: 
    sequence: 20
    point: Processing
    run-process: Once Per Page Visit (default)

  error: 
    display-location: Inline in Notification

  server-side-condition: 
    when-button-pressed: SAVE # 23744200215731727
    execution-scope: For Created and Modified Rows

- # ====== Process: Identify the Action ========================
  id: 23744711800731732
  identification: 
    name: Identify the Action
    type: Execute Code
    execution-chain: None

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: |
      declare
        v_count number;
      begin  
      if :P14_WIP_LINE_COUNT > 1 
      then
        :P14_ACTION := 'Transfer';
      else
          -- Check if there are multiple Projects Selected 
          select count(*)
          into   v_count
          from   xxgpms_project_split 
          where  session_id = v('APP_SESSION')
          group  by project_number
          having count(*)>1;
          --  If there are multiple projects, then check if the quantity is entered
          if v_count >1 
          then
            null;
          end if;
      
      
      end if;
      end;  

  execution: 
    sequence: 40
    point: Processing
    run-process: Once Per Page Visit (default)

  error: 
    display-location: Inline in Notification

  server-side-condition: 
    type: Never

- # ====== Process: Get the Actual Project =====================
  id: 23745766257731743
  identification: 
    name: Get the Actual Project
    type: Execute Code
    execution-chain: None

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: |
      DECLARE
        V_COUNT NUMBER;
        V_PROJECT_NUMBER VARCHAR2(1000);
      BEGIN
      
      BEGIN
        select count(distinct column_value) 
        into :P14_PROJECTS_COUNT
        from table(
           select apex_string.split(:P14_WIP_PROJECT_NUMBER,'~')
           from dual);
      END;     
      
        SELECT REGEXP_COUNT(PR,'[^~]+',1)
        INTO   V_COUNT
        FROM
          (SELECT LTRIM(:P14_WIP_PROJECT_NUMBER,'~') PR
           FROM DUAL);  
          --  :P14_PROJECTS_COUNT := v_count;
        IF :P14_PROJECTS_COUNT = 1 
        THEN
          SELECT REGEXP_SUBSTR(PR,'[^~]+',1,1)
          INTO   :P14_ACTUAL_PROJECT_NUMBER
          FROM
            (SELECT LTRIM(:P14_WIP_PROJECT_NUMBER,'~') PR
             FROM DUAL);    
        END IF;  
      END;  
      
      BEGIN
        select count(distinct column_value) 
        into :P14_PROJECTS_COUNT
        from table(
           select apex_string.split(:P14_WIP_PROJECT_NUMBER,'~')
           from dual);
      END;     
      
      DECLARE
        V_COUNT NUMBER;
        V_TASK_NUMBER VARCHAR2(1000);
      BEGIN
      --   SELECT REGEXP_COUNT(PR,'[^-]+',1)
      --   INTO   V_COUNT
      --   FROM
      --     (SELECT LTRIM(:P14_WIP_TASK_NUMBER,'-') PR
      --      FROM DUAL);  
      
        select count(distinct column_value) 
        into V_COUNT
      --   into :P14_WIP_LINE_COUNT
        from table(
           select apex_string.split(:P14_WIP_TASK_NUMBER,'~')
           from dual);
      
        select count(column_value) 
      --   into V_COUNT
        into :P14_WIP_EXPIDS_COUNT
        from table(
           select apex_string.split(:P14_WIP_TASK_NUMBER,'~')
           from dual);
      
        IF V_COUNT =1 
        THEN
          SELECT REGEXP_SUBSTR(PR,'[^~]+',1,1)
          INTO   :P14_ACTUAL_TASK_NUMBER
          FROM
            (SELECT LTRIM(:P14_WIP_TASK_NUMBER,'~') PR
             FROM DUAL);
        END IF;  
      END;  
      
      -- 
      DELETE FROM XXGPMS_PROJECT_SPLIT 
      WHERE SESSION_ID = V('APP_SESSION');

  execution: 
    sequence: 20
    point: Before Header
    run-process: Once Per Page Visit (default)

- # ====== Process: Call Projects REST =========================
  id: 30101342278964621
  identification: 
    name: Call Projects REST
    type: Execution Chain
    execution-chain: None

  settings: 
    run-in-background: true
    temporary-file-handling: Ignore
    submit-immediately: true

  serialization: 
    serialize: false

  execution: 
    sequence: 60
    point: Processing
    run-process: Once Per Page Visit (default)

  error: 
    display-location: Inline in Notification

  server-side-condition: 
    type: Request = Value
    value: RUN_JOBS

- # ====== Process: New ========================================
  id: 30101402277964622
  identification: 
    name: New
    type: Invoke API
    execution-chain: Call Projects REST # 30101342278964621

  settings: 
    type: PL/SQL Package
    owner: PARSING SCHEMA
    package: XX_GPMS
    procedure-or-function: GET_ALL_MATTERS

  execution: 
    sequence: 10

- # ====== Process: Execute the Automation =====================
  id: 30101774411964626
  identification: 
    name: Execute the Automation
    type: Execute Code
    execution-chain: None

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: |
      if NVL(:P14_JOB_ALREADY_EXECUTED,'N') = 'N'
      THEN
      begin
      APEX_AUTOMATION.EXECUTE (
          p_application_id  => :APP_ID,
          p_static_id       => 'get-all-projects' 
          );
        :P14_JOB_ALREADY_EXECUTED := 'Y';    
      end;    
      END IF;

  execution: 
    sequence: 40
    point: Before Header
    run-process: Once Per Page Visit (default)

  server-side-condition: 
    type: Never

- # ====== Process: Percentage_for_the_progress ================
  id: 32096680204019283
  identification: 
    name: Percentage_for_the_progress
    type: Execute Code
    execution-chain: None

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: |
      begin
      select percentage,message
      into   :P0_PROGRESS_BAR2, :P0_PROGRESS_MESSAGE
      from   progress_bar_entries
      where  module = 'TRANSFER_SPLIT'
      and    seq = :P0_PROGRESS_SEQ
      order  by seq;
      exception
       when others then
         :P0_PROGRESS_BAR2 := 99;
         :P0_PROGRESS_MESSAGE := 'Processing..';
      end;
      
      apex_json.open_object;
      apex_json.write('percent', :P0_PROGRESS_BAR2);
      apex_json.write('message', :P0_PROGRESS_MESSAGE);
      apex_json.close_object;

  execution: 
    sequence: 70
    point: Ajax Callback
    run-process: Once Per Page Visit (default)

  comments: 
    comments: |
      -- SELECT PERCENTAGE, MESSAGE
      -- INTO  :P2_PROGRESS_BAR2,:P2_PROGRESS_MESSAGE
      -- FROM (
      -- SELECT * 
      -- FROM  PROGRESS_ENTRIES
      -- ORDER BY CREATED_DATE DESC)
      -- WHERE ROWNUM = 1;
      

- # ====== Process: Clear the Project Split Lines ==============
  id: 32830599319279002
  identification: 
    name: Clear the Project Split Lines
    type: Execute Code
    execution-chain: None

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: |
      delete from xxgpms_project_split 
      where  session_id = v('APP_SESSION');

  execution: 
    sequence: 10
    point: Processing
    run-process: Once Per Page Visit (default)

  error: 
    display-location: Inline in Notification

  server-side-condition: 
    when-button-pressed: SAVE # 23744200215731727

- # ====== Process: Setting NULL Values ========================
  id: 44843514624701902
  identification: 
    name: Setting NULL Values
    type: Execute Code
    execution-chain: None

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: |
      if :P0_WIP_AMOUNT is null 
      then
        :P0_WIP_AMOUNT := :P14_WIP_SEL_AMOUNT;
      end if;  
      
      if :P0_WIP_HOURS is null 
      then
        :P0_WIP_HOURS := :P14_WIP_HOURS_COUNT;
      end if;  
      
      if :P0_WIP_LINES is null 
      then
        :P0_WIP_LINES := :P14_WIP_LINE_COUNT;
      end if;  
      
      if :P0_WIP_AMOUNT is not null and :P14_WIP_SEL_AMOUNT is null 
      then
        :P14_WIP_SEL_AMOUNT := :P0_WIP_AMOUNT;
      end if;  
      
      if :P0_WIP_HOURS is not null and :P14_WIP_HOURS_COUNT is null 
      then
        :P14_WIP_HOURS_COUNT := :P0_WIP_HOURS;
      end if;  
      
      if :P0_WIP_LINES is not null and :P14_WIP_LINE_COUNT is null  
      then
        :P14_WIP_LINE_COUNT := :P0_WIP_LINES;
      end if;  

  execution: 
    sequence: 30
    point: Before Header
    run-process: Once Per Page Visit (default)

- # ====== Process: Update the Action ==========================
  id: 44843746078701904
  identification: 
    name: Update the Action
    type: Execute Code
    execution-chain: None

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: |
      begin
      update XXGPMS_PROJECT_SPLIT
      set    ACTION = decode(:P14_ACTION_SELECTION,'S','SPLIT','T','TRANSFER','ST','MULTI_SPLIT_TRANS')
      where  SESSION_ID = V('APP_SESSION');
      end;

  execution: 
    sequence: 30
    point: Processing
    run-process: Once Per Page Visit (default)

  error: 
    display-location: Inline in Notification

  server-side-condition: 
    when-button-pressed: SAVE # 23744200215731727

branches: 
- # ====== Branch: Redirect to Same Page =======================
  id: 44844587016701913
  identification: 
    name: Redirect to Same Page

  execution: 
    sequence: 10
    point: After Processing

  behavior: 
    type: Page or URL (Redirect)
    target: 
      url: 'f?p=&APP_ID.:14:&SESSION.::&DEBUG.:14::&success_msg=#SUCCESS_MSG#'
      page: 14 # Transfer and Split
      clear-cache: 14

  server-side-condition: 
    type: Never

